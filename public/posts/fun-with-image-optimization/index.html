<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>CMS Test</title>
</head>
<body>
  
  <article>
    <h1>Fun with image optimization</h1>
    <p>I've been having fun fiddling around with the new site, making little changes here there, cleaning up this and that. The focus of my <a href="/about/">Rip van Winkle-esque</a> return to web dev over the last few years was primarily focused on CSS and JS. When it came time to do the image production for the <a href="/projects/">projects section</a> section I realized I had a lot to (re)learn in that department too.</p>
<p>Over the weekend I set out to improve the site's image optimization. I <a href="/articles/finally-a-new-site/">mentioned here</a> that I dipped my toes in the srcset waters, initially creating a set of responsively sized images. Even though I was <a href="https://www.responsivebreakpoints.com/">using this</a> to create the different sizes, it was a bit of a slog, and I thought maybe I'd look into using a CDN. But then <a href="https://jakearchibald.com/2020/avif-has-landed/">this article</a> made it's way into my timeline and I decided to investigate next-generation image formats.</p>
<p>Putting aside .avif for a moment, or <a href="https://twitter.com/hankchizljaw/status/1303430155898159110">.wee as I think I'll be calling it</a>, WebP was one of the many things that happened when I wasn't paying attention. So even optimizing for WebP was a notable performance improvement (even though <a href="https://www.macrumors.com/2020/06/22/webp-safari-14/">Safari doesn't support it just quite yet</a>).</p>
<p>With the help of <a href="https://reachlightspeed.com/blog/using-the-new-high-performance-avif-image-format-on-the-web-today/">this article</a> I was able to easily make the necessary changes.</p>
<ol>
<li>Use <a href="">Squoosh</a> to create WebP and AVIF files from my PNGs</li>
<li>Swap in picture code.</li>
</ol>
<p>Here's the original code using srcset and responsively sized images (with an example image instead of the Nunjucks code calling the image)...</p>
<p>I don't have that many images on the site so it was a relatively easy update, but even with the laziest approach possible of using the defaults at <a href="">Squoosh</a> the difference in file size was impressive.</p>
<p>According to Lighthouse the image size totals for the <a href="/projects/">Projects landing page</a> were...</p>
<ul>
<li><strong>1,721k</strong> total using a set of images sized for breakpoints</li>
<li><strong>523.4k</strong> total using next-generation formats</li>
</ul>
<p>That's almost 70% smaller just using the Squoosh default settings. With a little more fine-tuning I was able to get it down to 300.9k, or 83% smaller. Of course Lighthouse is using AVIF for those totals, so the percentage would be a bit less with WebP. Still it's very much a nice performance bump as well as a progressive enhancement, otherwise known as a win-win!</p>
<p>The <a href="https://jakearchibald.com/2020/avif-has-landed/">article by Jake Archibald</a> that set me on this little journey has a lot of detailed techinical information and comparisons. Some of it was just beyond my technical comprehension, but if you're looking for more technical information on AVIF, this is a good place to find it. The article mentions one of the downsides of the format, which is also a <a href="https://developers.google.com/speed/webp/faq#does_webp_support_progressive_or_interlaced_display">downside of WebP</a>, no progressive display. Although the article on WebP does point to an <a href="https://developers.google.com/speed/webp/docs/api#advanced_decoding_api">advance decoding API</a>.</p>
<p>For my little site that no one reads I'm OK with the tradeoff of progressive display, especially considering that the file sizes are relatively small for both formats and I'm using lazy loading, your mileage may vary.</p>

    <ul>
      
        <li>
          <a href="/tag/performance/"><span aria-hidden="true">#</span>performance</a>
        </li>
      
        <li>
          <a href="/tag/the-site/"><span aria-hidden="true">#</span>the-site</a>
        </li>
      
    </ul>
  </article>

</body>
</html>
